<div>
  <section *ngIf="isLoading" class="w-full text-center py-8">
    <div
      class="p-progress-spinner lib-progress-indicator__infinite text-center"
      [style]="{ width: '50px', height: '50px' }"
    >
      <svg
        class="p-progress-spinner-svg"
        viewBox="25 25 50 50"
        [style.animation-duration]="'.5s'"
      >
        <defs>
          <linearGradient id="gradient" x1="0%" y1="20%" x2="50%" y2="150%">
            <stop offset="25%" stop-color="#6FD940"></stop>
            <stop offset="45%" stop-color="#DBDC11"></stop>
          </linearGradient>
        </defs>
        <circle
          stroke="url(#gradient)"
          class="p-progress-spinner-circle"
          cx="50"
          cy="50"
          [attr.r]="21"
          fill="none"
          [attr.stroke-width]="6"
          stroke-miterlimit="10"
        />
      </svg>
    </div>
  </section>
  <p-messages *ngIf="!isLoading && !policy" severity="error">
    <ng-template pTemplate> Hubo un error. Vuelva a intentarlo. </ng-template>
  </p-messages>

  <div *ngIf="!isLoading && policy" class="pt-5 flex flex-col gap-y-4">
    <div>
      <p-divider align="left" type="dashed" styleClass="my-2">
        <div class="inline-flex align-items-center">
          <b>Póliza</b>
        </div>
      </p-divider>
      <div class="flex flex-col gap-y-4">
        <section class="w-full flex flex-col sm:flex-row gap-x-4">
          <div class="w-full sm:w-1/3">
            <label>Número</label>
            <input
              type="text"
              pInputText
              class="w-full"
              readonly
              [value]="policy.policyNumber"
            />
          </div>
          <div class="w-full sm:w-1/3">
            <label>Producto</label>
            <input
              type="text"
              pInputText
              class="w-full"
              readonly
              [value]="policy.productName"
            />
          </div>
          <div class="w-full sm:w-1/3">
            <span>Inicio vigencia</span>
            <span class="p-input-icon-right w-full">
              <input
                type="text"
                pInputText
                class="w-full"
                readonly
                [value]="policy.effectiveStartDatePolicy | date: 'YYYY-MM-dd'"
              />
              <i class="pi pi-calendar"></i>
            </span>
          </div>
        </section>
        <section class="w-full flex flex-col sm:flex-row gap-x-4">
          <div class="w-full sm:w-1/3">
            <span>Fin de vigencia</span>
            <span class="p-input-icon-right w-full">
              <input
                type="text"
                pInputText
                class="w-full"
                readonly
                [value]="policy.expirationDate | date: 'YYYY-MM-dd'"
              />
              <i class="pi pi-calendar"></i>
            </span>
          </div>
          <div class="w-full sm:w-1/3">
            <label>Valor prima</label>
            <p-inputNumber
              class="w-full"
              styleClass="w-full"
              inputStyleClass="w-full"
              [ngModel]="policy.premiumValue"
              [readonly]="true"
              mode="currency"
              currency="COP"
            >
            </p-inputNumber>
          </div>
          <div class="w-full sm:w-1/3">
            <label>Agente</label>
            <input
              type="text"
              pInputText
              class="w-full"
              readonly
              [value]="policy.agent"
            />
          </div>
        </section>
        <section class="w-full flex flex-col sm:flex-row gap-x-4">
          <div class="w-full sm:w-1/3">
            <label>Método de pago</label>
            <input
              type="text"
              pInputText
              class="w-full"
              readonly
              [value]="policy.payment.method"
            />
          </div>
          <div class="w-full sm:w-1/3">
            <span>Fecha emisión</span>
            <span class="p-input-icon-right w-full">
              <input
                type="text"
                pInputText
                class="w-full"
                readonly
                [value]="policy.inceptionDate | date: 'YYYY-MM-dd'"
              />
              <i class="pi pi-calendar"></i>
            </span>
          </div>
          <div class="w-full sm:w-1/3">
            <label>Plan adquirido</label>
            <input
              type="text"
              pInputText
              readonly
              class="w-full"
              [value]="policy.servicePlan.name"
            />
          </div>
        </section>
      </div>
    </div>
    <div>
      <p-divider align="left" type="dashed" styleClass="my-2">
        <div class="inline-flex align-items-center">
          <b>Mascota</b>
        </div>
      </p-divider>
      <section class="w-full flex flex-col sm:flex-row gap-x-4">
        <div class="w-full sm:w-1/3">
          <label>Tipo</label>
          <input
            type="text"
            pInputText
            class="w-full"
            readonly
            [value]="policy.complementaryData.petType"
          />
        </div>
        <div class="w-full sm:w-1/3">
          <label>Nombre</label>
          <input
            type="text"
            pInputText
            class="w-full"
            readonly
            [value]="policy.complementaryData.petName"
          />
        </div>
        <div class="w-full sm:w-1/3">
          <label>Edad</label>
          <input
            type="text"
            pInputText
            class="w-full"
            readonly
            [value]="policy.complementaryData.petAge"
          />
        </div>
        <div class="w-full sm:w-1/3">
          <label>Raza</label>
          <input
            type="text"
            pInputText
            class="w-full"
            readonly
            [value]="policy.complementaryData.petBrand"
          />
        </div>
      </section>
    </div>
    <div>
      <p-divider align="left" type="dashed" styleClass="my-2">
        <div class="inline-flex align-items-center">
          <b>Otros</b>
        </div>
      </p-divider>
      <section class="w-full flex flex-col sm:flex-row gap-x-4">
        <div class="w-full sm:w-1/3">
          <label>Correo electronico registrado</label>
          <input
            type="text"
            pInputText
            class="w-full"
            [value]="policy.policyEmail"
            readonly
          />
        </div>
        <div class="w-full sm:w-1/3">
          <label>Medio de pago</label>
          <input
            type="text"
            pInputText
            class="w-full"
            [value]="policy.payment.type"
            readonly
          />
        </div>
        <div class="w-full sm:w-1/3">
          <label>Numero</label>
          <input
            type="text"
            pInputText
            class="w-full"
            [value]="policy.payment.account"
            readonly
          />
        </div>
      </section>
    </div>
  </div>
  <section  *ngIf="!isLoading && policy" class="z-10 sticky bottom-0 bg-white pb-6">
    <p-divider></p-divider>
    <button
      pButton
      type="button"
      label="Aceptar"
      class="p-button p-button-secondary min-w-max"
    ></button>

    <button pButton type="submit" label="Cancelar" class="min-w-max"></button>
  </section>
</div>
